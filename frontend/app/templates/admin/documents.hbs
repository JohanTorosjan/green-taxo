<h2>Documents</h2>

<button type="button" {{on "click" this.openModal}}>
  Ajouter un document
</button>

<ul>
  {{#each this.documents as |doc|}}
    <li>
      <strong>{{doc.name}}</strong> 
      (date: {{doc.doc_date}}) 
      ‚Äî cr√©√© le {{doc.created_at}}

      <button type="button" {{on "click" (fn this.downloadDocument doc.id doc.name)}}>
        T√©l√©charger
      </button>

      {{#if (eq doc.analysis_status "completed")}}
        <button type="button" {{on "click" (fn this.openAnalysis doc)}} class="btn-analysis">
          üìä Voir l'analyse
        </button>
      {{else if (eq doc.analysis_status "processing")}}
        <span class="status-pending">‚è≥ Analyse en cours...</span>
        {{else if (eq doc.analysis_status "pending")}}
        <span class="status-pending">‚è≥ Lancement de l'analyse...</span>
      {{else}}
        <span class="status-error">‚ùå Erreur d'analyse</span>
      {{/if}}
      
    </li>
  {{else}}
    <li>Aucun document pour l'instant</li>
  {{/each}}
</ul>

{{#if this.isModalOpen}}
  <div class="modal-backdrop">
    <div class="modal">
      <h3>Importer un document</h3>

      <div class="form-group">
        <label>Nom du document :</label>
        <input type="text" {{on "input" this.updateName}} value={{this.documentName}} />
      </div>

      <div class="form-group">
        <label>Date :</label>
        <input type="date" {{on "input" this.updateDate}} value={{this.documentDate}} />
      </div>

      <div class="form-group">
        <label>Fichier (PDF uniquement) :</label>
        <input type="file" accept="application/pdf" {{on "change" this.handleFileChange}} />
      </div>
      
      <div class="actions">
        <button type="button" {{on "click" this.uploadFile}}>Importer</button>
        <button type="button" {{on "click" this.closeModal}}>Annuler</button>
      </div>
    </div>
  </div>
{{/if}}
